require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({1:[function(require,module,exports) {
var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e={LEFT:0,RIGHT:1,MIX:2,SINE:1,TRIANGLE:2,SAW:3,SQUARE:4,LOWPASS:0,HIGHPASS:1,BANDPASS:2,NOTCH:3,BARTLETT:1,BARTLETTHANN:2,BLACKMAN:3,COSINE:4,GAUSS:5,HAMMING:6,HANN:7,LANCZOS:8,RECTANGULAR:9,TRIANGULAR:10,OFF:0,FW:1,BW:2,FWBW:3,TWO_PI:2*Math.PI};function s(e,s){"function"!=typeof this[e]&&"object"!==t(this[e])&&("function"==typeof this[s]&&"object"!==t(this[s])?this[e]=this[s]:this[e]=function(t){return t instanceof Array?t:"number"==typeof t?new Array(t):void 0})}function i(t,e){this.bufferSize=t,this.sampleRate=e,this.bandwidth=2/t*e/2,this.spectrum=new Float64Array(t/2),this.real=new Float64Array(t),this.imag=new Float64Array(t),this.peakBand=0,this.peak=0,this.getBandFrequency=function(t){return this.bandwidth*t+this.bandwidth/2},this.calculateSpectrum=function(){for(var e,s,i,a=this.spectrum,h=this.real,r=this.imag,n=2/this.bufferSize,l=Math.sqrt,o=0,u=t/2;o<u;o++)(i=n*l((e=h[o])*e+(s=r[o])*s))>this.peak&&(this.peakBand=o,this.peak=i),a[o]=i}}function a(t,e){i.call(this,t,e);var s=t/2*t,a=2*Math.PI;this.sinTable=new Float64Array(s),this.cosTable=new Float64Array(s);for(var h=0;h<s;h++)this.sinTable[h]=Math.sin(h*a/t),this.cosTable[h]=Math.cos(h*a/t)}function h(t,e){i.call(this,t,e),this.reverseTable=new Uint32Array(t);for(var s,a=1,h=t>>1;a<t;){for(s=0;s<a;s++)this.reverseTable[s+a]=this.reverseTable[s]+h;a<<=1,h>>=1}for(this.sinTable=new Float64Array(t),this.cosTable=new Float64Array(t),s=0;s<t;s++)this.sinTable[s]=Math.sin(-Math.PI/s),this.cosTable[s]=Math.cos(-Math.PI/s)}function r(t,e){i.call(this,t,e),this.trans=new Float64Array(t),this.reverseTable=new Uint32Array(t),this.reverseBinPermute=function(t,e){var s,i=this.bufferSize,a=i>>>1,h=i-1,r=1,n=0;t[0]=e[0];do{for(n+=a,t[r]=e[n],t[n]=e[r],r++,s=a<<1;!((n^=s>>=1)&s););n>=r&&(t[r]=e[n],t[n]=e[r],t[h-r]=e[h-n],t[h-n]=e[h-r]),r++}while(r<a);t[h]=e[h]},this.generateReverseTable=function(){var t,e=this.bufferSize,s=e>>>1,i=e-1,a=1,h=0;this.reverseTable[0]=0;do{for(h+=s,this.reverseTable[a]=h,this.reverseTable[h]=a,a++,t=s<<1;!((h^=t>>=1)&t););h>=a&&(this.reverseTable[a]=h,this.reverseTable[h]=a,this.reverseTable[i-a]=i-h,this.reverseTable[i-h]=i-a),a++}while(a<s);this.reverseTable[i]=i},this.generateReverseTable()}function n(t,s,i,a,h,r,n,l){this.file=t,this.bufferSize=s,this.sampleRate=i,this.playStart=a||0,this.playEnd=h||1,this.loopStart=r||0,this.loopEnd=n||1,this.loopMode=l||e.OFF,this.loaded=!1,this.samples=[],this.signal=new Float64Array(s),this.frameCount=0,this.envelope=null,this.amplitude=1,this.rootFrequency=110,this.frequency=550,this.step=this.frequency/this.rootFrequency,this.duration=0,this.samplesProcessed=0,this.playhead=0;var o=document.createElement("AUDIO"),u=this;this.loadSamples=function(t){for(var s=e.getChannel(e.MIX,t.frameBuffer),i=0;i<s.length;i++)u.samples.push(s[i])},this.loadComplete=function(){u.samples=new Float64Array(u.samples),u.loaded=!0},this.loadMetaData=function(){u.duration=o.duration},o.addEventListener("MozAudioAvailable",this.loadSamples,!1),o.addEventListener("loadedmetadata",this.loadMetaData,!1),o.addEventListener("ended",this.loadComplete,!1),o.muted=!0,o.src=t,o.play()}function l(t,s,i,a,h){switch(this.frequency=s,this.amplitude=i,this.bufferSize=a,this.sampleRate=h,this.frameCount=0,this.waveTableLength=2048,this.cyclesPerSample=s/h,this.signal=new Float64Array(a),this.envelope=null,parseInt(t,10)){case e.TRIANGLE:this.func=l.Triangle;break;case e.SAW:this.func=l.Saw;break;case e.SQUARE:this.func=l.Square;break;default:case e.SINE:this.func=l.Sine}this.generateWaveTable=function(){l.waveTable[this.func]=new Float64Array(2048);for(var t=1/(this.waveTableLength/this.sampleRate),e=0;e<this.waveTableLength;e++)l.waveTable[this.func][e]=this.func(e*t/this.sampleRate)},void 0===l.waveTable&&(l.waveTable={}),void 0===l.waveTable[this.func]&&this.generateWaveTable(),this.waveTable=l.waveTable[this.func]}function o(t,e,s,i,a,h){this.sampleRate=h,this.attackLength=t,this.decayLength=e,this.sustainLevel=s,this.sustainLength=i,this.releaseLength=a,this.sampleRate=h,this.attackSamples=t*h,this.decaySamples=e*h,this.sustainSamples=i*h,this.releaseSamples=a*h,this.update=function(){this.attack=this.attackSamples,this.decay=this.attack+this.decaySamples,this.sustain=this.decay+this.sustainSamples,this.release=this.sustain+this.releaseSamples},this.update(),this.samplesProcessed=0}function u(t,s,i,a){switch(this.sampleRate=a,t){case e.LOWPASS:case e.LP12:this.func=new u.LP12(s,i,a)}}function f(t,e,s,i){this.type=t,this.cutoff=e,this.resonance=s,this.sampleRate=i,this.f=Float64Array(4),this.f[0]=0,this.f[1]=0,this.f[2]=0,this.f[3]=0,this.calcCoeff=function(t,e){this.freq=2*Math.sin(Math.PI*Math.min(.25,t/(2*this.sampleRate))),this.damp=Math.min(2*(1-Math.pow(e,.25)),Math.min(2,2/this.freq-.5*this.freq))},this.calcCoeff(e,s)}function p(t,s){switch(this.alpha=s,t){case e.BARTLETT:this.func=p.Bartlett;break;case e.BARTLETTHANN:this.func=p.BartlettHann;break;case e.BLACKMAN:this.func=p.Blackman,this.alpha=this.alpha||.16;break;case e.COSINE:this.func=p.Cosine;break;case e.GAUSS:this.func=p.Gauss,this.alpha=this.alpha||.25;break;case e.HAMMING:this.func=p.Hamming;break;case e.HANN:this.func=p.Hann;break;case e.LANCZOS:this.func=p.Lanczoz;break;case e.RECTANGULAR:this.func=p.Rectangular;break;case e.TRIANGULAR:this.func=p.Triangular}}function c(t){return(Math.exp(t)-Math.exp(-t))/2}function y(t,s){this.Fs=s,this.type=t,this.parameterType=e.Q,this.x_1_l=0,this.x_2_l=0,this.y_1_l=0,this.y_2_l=0,this.x_1_r=0,this.x_2_r=0,this.y_1_r=0,this.y_2_r=0,this.b0=1,this.a0=1,this.b1=0,this.a1=0,this.b2=0,this.a2=0,this.b0a0=this.b0/this.a0,this.b1a0=this.b1/this.a0,this.b2a0=this.b2/this.a0,this.a1a0=this.a1/this.a0,this.a2a0=this.a2/this.a0,this.f0=3e3,this.dBgain=12,this.Q=1,this.BW=-3,this.S=1,this.coefficients=function(){return{b:[this.b0,this.b1,this.b2],a:[this.a0,this.a1,this.a2]}},this.setFilterType=function(t){this.type=t,this.recalculateCoefficients()},this.setSampleRate=function(t){this.Fs=t,this.recalculateCoefficients()},this.setQ=function(t){this.parameterType=e.Q,this.Q=Math.max(Math.min(t,115),.001),this.recalculateCoefficients()},this.setBW=function(t){this.parameterType=e.BW,this.BW=t,this.recalculateCoefficients()},this.setS=function(t){this.parameterType=e.S,this.S=Math.max(Math.min(t,5),1e-4),this.recalculateCoefficients()},this.setF0=function(t){this.f0=t,this.recalculateCoefficients()},this.setDbGain=function(t){this.dBgain=t,this.recalculateCoefficients()},this.recalculateCoefficients=function(){var s;s=t===e.PEAKING_EQ||t===e.LOW_SHELF||t===e.HIGH_SHELF?Math.pow(10,this.dBgain/40):Math.sqrt(Math.pow(10,this.dBgain/20));var i,a=e.TWO_PI*this.f0/this.Fs,h=Math.cos(a),r=Math.sin(a),n=0;switch(this.parameterType){case e.Q:n=r/(2*this.Q);break;case e.BW:n=r*c(Math.LN2/2*this.BW*a/r);break;case e.S:n=r/2*Math.sqrt((s+1/s)*(1/this.S-1)+2)}switch(this.type){case e.LPF:this.b0=(1-h)/2,this.b1=1-h,this.b2=(1-h)/2,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.HPF:this.b0=(1+h)/2,this.b1=-(1+h),this.b2=(1+h)/2,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.BPF_CONSTANT_SKIRT:this.b0=r/2,this.b1=0,this.b2=-r/2,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.BPF_CONSTANT_PEAK:this.b0=n,this.b1=0,this.b2=-n,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.NOTCH:this.b0=1,this.b1=-2*h,this.b2=1,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.APF:this.b0=1-n,this.b1=-2*h,this.b2=1+n,this.a0=1+n,this.a1=-2*h,this.a2=1-n;break;case e.PEAKING_EQ:this.b0=1+n*s,this.b1=-2*h,this.b2=1-n*s,this.a0=1+n/s,this.a1=-2*h,this.a2=1-n/s;break;case e.LOW_SHELF:i=r*Math.sqrt((3^s)*(1/this.S-1)+2*s),this.b0=s*(s+1-(s-1)*h+i),this.b1=2*s*(s-1-(s+1)*h),this.b2=s*(s+1-(s-1)*h-i),this.a0=s+1+(s-1)*h+i,this.a1=-2*(s-1+(s+1)*h),this.a2=s+1+(s-1)*h-i;break;case e.HIGH_SHELF:i=r*Math.sqrt((3^s)*(1/this.S-1)+2*s),this.b0=s*(s+1+(s-1)*h+i),this.b1=-2*s*(s-1+(s+1)*h),this.b2=s*(s+1+(s-1)*h-i),this.a0=s+1-(s-1)*h+i,this.a1=2*(s-1-(s+1)*h),this.a2=s+1-(s-1)*h-i}this.b0a0=this.b0/this.a0,this.b1a0=this.b1/this.a0,this.b2a0=this.b2/this.a0,this.a1a0=this.a1/this.a0,this.a2a0=this.a2/this.a0},this.process=function(t){for(var e=t.length,s=new Float64Array(e),i=0;i<t.length;i++)s[i]=this.b0a0*t[i]+this.b1a0*this.x_1_l+this.b2a0*this.x_2_l-this.a1a0*this.y_1_l-this.a2a0*this.y_2_l,this.y_2_l=this.y_1_l,this.y_1_l=s[i],this.x_2_l=this.x_1_l,this.x_1_l=t[i];return s},this.processStereo=function(t){for(var e=t.length,s=new Float64Array(e),i=0;i<e/2;i++)s[2*i]=this.b0a0*t[2*i]+this.b1a0*this.x_1_l+this.b2a0*this.x_2_l-this.a1a0*this.y_1_l-this.a2a0*this.y_2_l,this.y_2_l=this.y_1_l,this.y_1_l=s[2*i],this.x_2_l=this.x_1_l,this.x_1_l=t[2*i],s[2*i+1]=this.b0a0*t[2*i+1]+this.b1a0*this.x_1_r+this.b2a0*this.x_2_r-this.a1a0*this.y_1_r-this.a2a0*this.y_2_r,this.y_2_r=this.y_1_r,this.y_1_r=s[2*i+1],this.x_2_r=this.x_1_r,this.x_1_r=t[2*i+1];return s}}function d(t){this.FS=t,this.minFreq=40,this.maxFreq=16e3,this.bandsPerOctave=1,this.filters=[],this.freqzs=[],this.calculateFreqzs=!0,this.recalculateFilters=function(){var t=Math.round(Math.log(this.maxFreq/this.minFreq)*this.bandsPerOctave/Math.LN2);this.filters=[];for(var s=0;s<t;s++){var i=this.minFreq*Math.pow(2,s/this.bandsPerOctave),a=new y(e.PEAKING_EQ,this.FS);a.setDbGain(0),a.setBW(1/this.bandsPerOctave),a.setF0(i),this.filters[s]=a,this.recalculateFreqz(s)}},this.setMinimumFrequency=function(t){this.minFreq=t,this.recalculateFilters()},this.setMaximumFrequency=function(t){this.maxFreq=t,this.recalculateFilters()},this.setBandsPerOctave=function(t){this.bandsPerOctave=t,this.recalculateFilters()},this.setBandGain=function(t,e){if(t<0||t>this.filters.length-1)throw"The band index of the graphical equalizer is out of bounds.";if(!e)throw"A gain must be passed.";this.filters[t].setDbGain(e),this.recalculateFreqz(t)},this.recalculateFreqz=function(t){if(this.calculateFreqzs){if(t<0||t>this.filters.length-1)throw"The band index of the graphical equalizer is out of bounds. "+t+" is out of [0, "+this.filters.length-1+"]";if(!this.w){this.w=Float64Array(400);for(var s=0;s<this.w.length;s++)this.w[s]=Math.PI/this.w.length*s}var i=[this.filters[t].b0,this.filters[t].b1,this.filters[t].b2],a=[this.filters[t].a0,this.filters[t].a1,this.filters[t].a2];this.freqzs[t]=e.mag2db(e.freqz(i,a,this.w))}},this.process=function(t){for(var e=t,s=0;s<this.filters.length;s++)e=this.filters[s].process(e);return e},this.processStereo=function(t){for(var e=t,s=0;s<this.filters.length;s++)e=this.filters[s].processStereo(e);return e}}function m(t,e,s,i){this.delayBufferSamples=new Float64Array(t),this.delayInputPointer=e,this.delayOutputPointer=0,this.delayInSamples=e,this.masterVolume=s,this.delayVolume=i}function b(t,e,s){this.delayBufferSamples=new Float64Array(t),this.delayInputPointer=e,this.delayOutputPointer=0,this.delayInSamples=e,this.delayVolume=s}function v(t,s,i,a,h,r){var n,l;for(this.delayInSamples=s,this.masterVolume=i,this.mixVolume=a,this.delayVolume=h,this.dampFrequency=r,this.NR_OF_MULTIDELAYS=6,this.NR_OF_SINGLEDELAYS=6,this.LOWPASSL=new f(e.LOWPASS,r,0,44100),this.LOWPASSR=new f(e.LOWPASS,r,0,44100),this.singleDelays=[],n=0;n<this.NR_OF_SINGLEDELAYS;n++)l=1+n/7,this.singleDelays[n]=new b(t,Math.round(this.delayInSamples*l),this.delayVolume);for(this.multiDelays=[],n=0;n<this.NR_OF_MULTIDELAYS;n++)l=1+n/10,this.multiDelays[n]=new m(t,Math.round(this.delayInSamples*l),this.masterVolume,this.delayVolume)}s("Float64Array","WebGLFloatArray"),s("Int32Array","WebGLIntArray"),s("Uint16Array","WebGLUnsignedShortArray"),s("Uint8Array","WebGLUnsignedByteArray"),e.invert=function(t){for(var e=0,s=t.length;e<s;e++)t[e]*=-1;return t},e.interleave=function(t,e){if(t.length!==e.length)throw"Can not interleave. Channel lengths differ.";for(var s=new Float64Array(2*t.length),i=0,a=t.length;i<a;i++)s[2*i]=t[i],s[2*i+1]=e[i];return s},e.deinterleave=function(){var t,s,i,a=[];return a[e.MIX]=function(t){for(var e=0,s=t.length/2;e<s;e++)i[e]=(t[2*e]+t[2*e+1])/2;return i},a[e.LEFT]=function(e){for(var s=0,i=e.length/2;s<i;s++)t[s]=e[2*s];return t},a[e.RIGHT]=function(t){for(var e=0,i=t.length/2;e<i;e++)s[e]=t[2*e+1];return s},function(e,h){return t=t||new Float64Array(h.length/2),s=s||new Float64Array(h.length/2),i=i||new Float64Array(h.length/2),h.length/2!==t.length&&(t=new Float64Array(h.length/2),s=new Float64Array(h.length/2),i=new Float64Array(h.length/2)),a[e](h)}}(),e.getChannel=e.deinterleave,e.mixSampleBuffers=function(t,e,s,i){for(var a=new Float64Array(t),h=0;h<t.length;h++)a[h]+=(s?-e[h]:e[h])/i;return a},e.LPF=0,e.HPF=1,e.BPF_CONSTANT_SKIRT=2,e.BPF_CONSTANT_PEAK=3,e.NOTCH=4,e.APF=5,e.PEAKING_EQ=6,e.LOW_SHELF=7,e.HIGH_SHELF=8,e.Q=1,e.BW=2,e.S=3,e.RMS=function(t){for(var e=0,s=0,i=t.length;s<i;s++)e+=t[s]*t[s];return Math.sqrt(e/i)},e.Peak=function(t){for(var e=0,s=0,i=t.length;s<i;s++)e=Math.abs(t[s])>e?Math.abs(t[s]):e;return e},a.prototype.forward=function(t){for(var e,s,i=this.real,a=this.imag,h=0;h<this.bufferSize/2;h++){e=0,s=0;for(var r=0;r<t.length;r++)e+=this.cosTable[h*r]*t[r],s+=this.sinTable[h*r]*t[r];i[h]=e,a[h]=s}return this.calculateSpectrum()},h.prototype.forward=function(t){var e=this.bufferSize,s=this.cosTable,i=this.sinTable,a=this.reverseTable,h=this.real,r=this.imag,n=(this.spectrum,Math.floor(Math.log(e)/Math.LN2));if(Math.pow(2,n)!==e)throw"Invalid buffer size, must be a power of 2.";if(e!==t.length)throw"Supplied buffer is not the same size as defined FFT. FFT Size: "+e+" Buffer Size: "+t.length;var l,o,u,f,p,c,y,d,m,b=1;for(m=0;m<e;m++)h[m]=t[a[m]],r[m]=0;for(;b<e;){l=s[b],o=i[b],u=1,f=0;for(var v=0;v<b;v++){for(m=v;m<e;)c=u*h[p=m+b]-f*r[p],y=u*r[p]+f*h[p],h[p]=h[m]-c,r[p]=r[m]-y,h[m]+=c,r[m]+=y,m+=b<<1;u=(d=u)*l-f*o,f=d*o+f*l}b<<=1}return this.calculateSpectrum()},h.prototype.inverse=function(t,e){var s=this.bufferSize,i=this.cosTable,a=this.sinTable,h=this.reverseTable;this.spectrum;t=t||this.real,e=e||this.imag;var r,n,l,o,u,f,p,c,y,d=1;for(y=0;y<s;y++)e[y]*=-1;var m=new Float64Array(s),b=new Float64Array(s);for(y=0;y<t.length;y++)m[y]=t[h[y]],b[y]=e[h[y]];for(t=m,e=b;d<s;){r=i[d],n=a[d],l=1,o=0;for(var v=0;v<d;v++){for(y=v;y<s;)f=l*t[u=y+d]-o*e[u],p=l*e[u]+o*t[u],t[u]=t[y]-f,e[u]=e[y]-p,t[y]+=f,e[y]+=p,y+=d<<1;l=(c=l)*r-o*n,o=c*n+o*r}d<<=1}var S=new Float64Array(s);for(y=0;y<s;y++)S[y]=t[y]/s;return S},r.prototype.forward=function(t){var e,s,i,a,h,r,n,l,o,u,f,p,c,y,d,m,b,v,S,g,P,_,F,A,T,M,w=this.bufferSize,I=this.spectrum,L=this.trans,E=2*Math.PI,O=Math.sqrt,B=w>>>1,R=2/w;this.reverseBinPermute(L,t);for(var N=0,q=4;N<w;q*=4){for(var k=N;k<w;k+=q)b=L[k]-L[k+1],L[k]+=L[k+1],L[k+1]=b;N=2*(q-1)}for(e=2,a=w>>>1;a>>>=1;){N=0,q=(e<<=1)<<1,s=e>>>2,i=e>>>3;do{if(1!==s)for(k=N;k<w;k+=q)p=(f=(u=(o=k)+s)+s)+s,h=L[f]+L[p],L[p]-=L[f],L[f]=L[o]-h,L[o]+=h,o+=i,u+=i,p+=i,h=L[f+=i]+L[p],r=L[f]-L[p],h=-h*Math.SQRT1_2,r*=Math.SQRT1_2,b=L[u],L[p]=h+b,L[f]=h-b,L[u]=L[o]-r,L[o]+=r;else for(k=N;k<w;k+=q)p=(f=(u=(o=k)+s)+s)+s,h=L[f]+L[p],L[p]-=L[f],L[f]=L[o]-h,L[o]+=h;N=(q<<1)-e,q<<=2}while(N<w);_=E/e;for(var W=1;W<i;W++){F=W*_,S=Math.sin(F),g=4*(v=Math.cos(F))*(v*v-.75),P=4*S*(.75-S*S),N=0,q=e<<1;do{for(k=N;k<w;k+=q)p=(f=(u=(o=k+W)+s)+s)+s,m=(d=(y=(c=k+s-W)+s)+s)+s,r=L[d]*v-L[f]*S,h=L[d]*S+L[f]*v,l=L[m]*g-L[p]*P,n=L[m]*P+L[p]*g,b=r-l,r+=l,l=b,L[m]=r+L[y],L[f]=r-L[y],b=n-h,h+=n,n=b,L[p]=n+L[u],L[d]=n-L[u],L[y]=L[o]-h,L[o]+=h,L[u]=l+L[c],L[c]-=l;N=(q<<1)-e,q<<=2}while(N<w)}}for(;--B;)(M=R*O((A=L[B])*A+(T=L[w-B-1])*T))>this.peak&&(this.peakBand=B,this.peak=M),I[B]=M;return I[0]=R*L[0],I},n.prototype.applyEnvelope=function(){return this.envelope.process(this.signal),this.signal},n.prototype.generate=function(){this.frameCount,this.bufferSize;for(var t=this.playEnd*this.samples.length-this.playStart*this.samples.length,s=this.playStart*this.samples.length,i=this.playEnd*this.samples.length,a=0;a<this.bufferSize;a++){switch(this.loopMode){case e.OFF:this.playhead=Math.round(this.samplesProcessed*this.step+s),this.playhead<this.playEnd*this.samples.length?this.signal[a]=this.samples[this.playhead]*this.amplitude:this.signal[a]=0;break;case e.FW:this.playhead=Math.round(this.samplesProcessed*this.step%t+s),this.playhead<this.playEnd*this.samples.length&&(this.signal[a]=this.samples[this.playhead]*this.amplitude);break;case e.BW:this.playhead=i-Math.round(this.samplesProcessed*this.step%t),this.playhead<this.playEnd*this.samples.length&&(this.signal[a]=this.samples[this.playhead]*this.amplitude);break;case e.FWBW:Math.floor(this.samplesProcessed*this.step/t)%2==0?this.playhead=Math.round(this.samplesProcessed*this.step%t+s):this.playhead=i-Math.round(this.samplesProcessed*this.step%t),this.playhead<this.playEnd*this.samples.length&&(this.signal[a]=this.samples[this.playhead]*this.amplitude)}this.samplesProcessed++}return this.frameCount++,this.signal},n.prototype.setFreq=function(t){var e=this.samplesProcessed*this.step;this.frequency=t,this.step=this.frequency/this.rootFrequency,this.samplesProcessed=Math.round(e/this.step)},n.prototype.reset=function(){this.samplesProcessed=0,this.playhead=0},l.prototype.setAmp=function(t){if(!(t>=0&&t<=1))throw"Amplitude out of range (0..1).";this.amplitude=t},l.prototype.setFreq=function(t){this.frequency=t,this.cyclesPerSample=t/this.sampleRate},l.prototype.add=function(t){for(var e=0;e<this.bufferSize;e++)this.signal[e]+=t.signal[e];return this.signal},l.prototype.addSignal=function(t){for(var e=0;e<t.length&&!(e>=this.bufferSize);e++)this.signal[e]+=t[e];return this.signal},l.prototype.addEnvelope=function(t){this.envelope=t},l.prototype.applyEnvelope=function(){this.envelope.process(this.signal)},l.prototype.valueAt=function(t){return this.waveTable[t%this.waveTableLength]},l.prototype.generate=function(){for(var t,e=this.frameCount*this.bufferSize,s=this.waveTableLength*this.frequency/this.sampleRate,i=0;i<this.bufferSize;i++)t=Math.round((e+i)*s),this.signal[i]=this.waveTable[t%this.waveTableLength]*this.amplitude;return this.frameCount++,this.signal},l.Sine=function(t){return Math.sin(e.TWO_PI*t)},l.Square=function(t){return t<.5?1:-1},l.Saw=function(t){return 2*(t-Math.round(t))},l.Triangle=function(t){return 1-4*Math.abs(Math.round(t)-t)},l.Pulse=function(t){},o.prototype.noteOn=function(){this.samplesProcessed=0,this.sustainSamples=this.sustainLength*this.sampleRate,this.update()},o.prototype.noteOff=function(){this.sustainSamples=this.samplesProcessed-this.decaySamples,this.update()},o.prototype.processSample=function(t){var e=0;return this.samplesProcessed<=this.attack?e=0+(this.samplesProcessed-0)/(this.attack-0)*1:this.samplesProcessed>this.attack&&this.samplesProcessed<=this.decay?e=1+(this.sustainLevel-1)*((this.samplesProcessed-this.attack)/(this.decay-this.attack)):this.samplesProcessed>this.decay&&this.samplesProcessed<=this.sustain?e=this.sustainLevel:this.samplesProcessed>this.sustain&&this.samplesProcessed<=this.release&&(e=this.sustainLevel+(0-this.sustainLevel)*((this.samplesProcessed-this.sustain)/(this.release-this.sustain))),t*e},o.prototype.value=function(){var t=0;return this.samplesProcessed<=this.attack?t=0+(this.samplesProcessed-0)/(this.attack-0)*1:this.samplesProcessed>this.attack&&this.samplesProcessed<=this.decay?t=1+(this.sustainLevel-1)*((this.samplesProcessed-this.attack)/(this.decay-this.attack)):this.samplesProcessed>this.decay&&this.samplesProcessed<=this.sustain?t=this.sustainLevel:this.samplesProcessed>this.sustain&&this.samplesProcessed<=this.release&&(t=this.sustainLevel+(0-this.sustainLevel)*((this.samplesProcessed-this.sustain)/(this.release-this.sustain))),t},o.prototype.process=function(t){for(var e=0;e<t.length;e++)t[e]*=this.value(),this.samplesProcessed++;return t},o.prototype.isActive=function(){return!(this.samplesProcessed>this.release||-1===this.samplesProcessed)},o.prototype.disable=function(){this.samplesProcessed=-1},u.prototype.__defineGetter__("cutoff",function(){return this.func.cutoff}),u.prototype.__defineGetter__("resonance",function(){return this.func.resonance}),u.prototype.set=function(t,e){this.func.calcCoeff(t,e)},u.prototype.process=function(t){this.func.process(t)},u.prototype.addEnvelope=function(t){if(!(t instanceof o))throw"Not an envelope.";this.func.addEnvelope(t)},u.LP12=function(t,e,s){this.sampleRate=s,this.vibraPos=0,this.vibraSpeed=0,this.envelope=!1,this.calcCoeff=function(t,e){this.w=2*Math.PI*t/this.sampleRate,this.q=1-this.w/(2*(e+.5/(1+this.w))+this.w-2),this.r=this.q*this.q,this.c=this.r+1-2*Math.cos(this.w)*this.q,this.cutoff=t,this.resonance=e},this.calcCoeff(t,e),this.process=function(t){for(var e=0;e<t.length;e++)this.vibraSpeed+=(t[e]-this.vibraPos)*this.c,this.vibraPos+=this.vibraSpeed,this.vibraSpeed*=this.r,this.envelope?(t[e]=t[e]*(1-this.envelope.value())+this.vibraPos*this.envelope.value(),this.envelope.samplesProcessed++):t[e]=this.vibraPos}},u.LP12.prototype.addEnvelope=function(t){this.envelope=t},f.prototype.process=function(t){for(var e,s,i=this.f,a=0;a<t.length;a++)e=t[a],i[3]=e-this.damp*i[2],i[0]=i[0]+this.freq*i[2],i[1]=i[3]-i[0],i[2]=this.freq*i[1]+i[2],s=.5*i[this.type],i[3]=e-this.damp*i[2],i[0]=i[0]+this.freq*i[2],i[1]=i[3]-i[0],i[2]=this.freq*i[1]+i[2],s+=.5*i[this.type],this.envelope?(t[a]=t[a]*(1-this.envelope.value())+s*this.envelope.value(),this.envelope.samplesProcessed++):t[a]=s},f.prototype.addEnvelope=function(t){if(!(t instanceof o))throw"This is not an envelope.";this.envelope=t},f.prototype.set=function(t,e){this.calcCoeff(t,e)},p.prototype.process=function(t){for(var e=t.length,s=0;s<e;s++)t[s]*=this.func(e,s,this.alpha);return t},p.Bartlett=function(t,e){return 2/(t-1)*((t-1)/2-Math.abs(e-(t-1)/2))},p.BartlettHann=function(t,s){return.62-.48*Math.abs(s/(t-1)-.5)-.38*Math.cos(e.TWO_PI*s/(t-1))},p.Blackman=function(t,s,i){var a=i/2;return(1-i)/2-.5*Math.cos(e.TWO_PI*s/(t-1))+a*Math.cos(4*Math.PI*s/(t-1))},p.Cosine=function(t,e){return Math.cos(Math.PI*e/(t-1)-Math.PI/2)},p.Gauss=function(t,e,s){return Math.pow(Math.E,-.5*Math.pow((e-(t-1)/2)/(s*(t-1)/2),2))},p.Hamming=function(t,s){return.54-.46*Math.cos(e.TWO_PI*s/(t-1))},p.Hann=function(t,s){return.5*(1-Math.cos(e.TWO_PI*s/(t-1)))},p.Lanczos=function(t,e){var s=2*e/(t-1)-1;return Math.sin(Math.PI*s)/(Math.PI*s)},p.Rectangular=function(t,e){return 1},p.Triangular=function(t,e){return 2/t*(t/2-Math.abs(e-(t-1)/2))},e.mag2db=function(t){for(var e=Math.pow(10,-6),s=Math.log,i=Math.max,a=Float64Array(t.length),h=0;h<t.length;h++)a[h]=20*s(i(t[h],e));return a},e.freqz=function(t,s,i){var a,h;if(!i)for(i=Float64Array(200),a=0;a<i.length;a++)i[a]=e.TWO_PI/i.length*a-Math.PI;var r=Float64Array(i.length),n=Math.sqrt,l=Math.cos,o=Math.sin;for(a=0;a<i.length;a++){var u={real:0,imag:0};for(h=0;h<t.length;h++)u.real+=t[h]*l(-h*i[a]),u.imag+=t[h]*o(-h*i[a]);var f={real:0,imag:0};for(h=0;h<s.length;h++)f.real+=s[h]*l(-h*i[a]),f.imag+=s[h]*o(-h*i[a]);r[a]=n(u.real*u.real+u.imag*u.imag)/n(f.real*f.real+f.imag*f.imag)}return r},m.prototype.setDelayInSamples=function(t){this.delayInSamples=t,this.delayInputPointer=this.delayOutputPointer+t,this.delayInputPointer>=this.delayBufferSamples.length-1&&(this.delayInputPointer=this.delayInputPointer-this.delayBufferSamples.length)},m.prototype.setMasterVolume=function(t){this.masterVolume=t},m.prototype.setDelayVolume=function(t){this.delayVolume=t},m.prototype.process=function(t){for(var e=new Float64Array(t.length),s=0;s<t.length;s++){var i=(null===this.delayBufferSamples[this.delayOutputPointer]?0:this.delayBufferSamples[this.delayOutputPointer])*this.delayVolume+t[s];this.delayBufferSamples[this.delayInputPointer]=i,e[s]=i*this.masterVolume,this.delayInputPointer++,this.delayInputPointer>=this.delayBufferSamples.length-1&&(this.delayInputPointer=0),this.delayOutputPointer++,this.delayOutputPointer>=this.delayBufferSamples.length-1&&(this.delayOutputPointer=0)}return e},b.prototype.setDelayInSamples=function(t){this.delayInSamples=t,this.delayInputPointer=this.delayOutputPointer+t,this.delayInputPointer>=this.delayBufferSamples.length-1&&(this.delayInputPointer=this.delayInputPointer-this.delayBufferSamples.length)},b.prototype.setDelayVolume=function(t){this.delayVolume=t},b.prototype.process=function(t){for(var e=new Float64Array(t.length),s=0;s<t.length;s++){this.delayBufferSamples[this.delayInputPointer]=t[s];var i=this.delayBufferSamples[this.delayOutputPointer];e[s]=i*this.delayVolume,this.delayInputPointer++,this.delayInputPointer>=this.delayBufferSamples.length-1&&(this.delayInputPointer=0),this.delayOutputPointer++,this.delayOutputPointer>=this.delayBufferSamples.length-1&&(this.delayOutputPointer=0)}return e},v.prototype.setDelayInSamples=function(t){var e,s;for(this.delayInSamples=t,e=0;e<this.NR_OF_SINGLEDELAYS;e++)s=1+e/7,this.singleDelays[e].setDelayInSamples(Math.round(this.delayInSamples*s));for(e=0;e<this.NR_OF_MULTIDELAYS;e++)s=1+e/10,this.multiDelays[e].setDelayInSamples(Math.round(this.delayInSamples*s))},v.prototype.setMasterVolume=function(t){this.masterVolume=t},v.prototype.setMixVolume=function(t){this.mixVolume=t},v.prototype.setDelayVolume=function(t){var e;for(this.delayVolume=t,e=0;e<this.NR_OF_SINGLEDELAYS;e++)this.singleDelays[e].setDelayVolume(this.delayVolume);for(e=0;e<this.NR_OF_MULTIDELAYS;e++)this.multiDelays[e].setDelayVolume(this.delayVolume)},v.prototype.setDampFrequency=function(t){this.dampFrequency=t,this.LOWPASSL.set(t,0),this.LOWPASSR.set(t,0)},v.prototype.process=function(t){var s=new Float64Array(t.length),i=e.deinterleave(t);this.LOWPASSL.process(i[e.LEFT]),this.LOWPASSR.process(i[e.RIGHT]);var a,h=e.interleave(i[e.LEFT],i[e.RIGHT]);for(a=0;a<this.NR_OF_MULTIDELAYS;a++)s=e.mixSampleBuffers(s,this.multiDelays[a].process(h),2%a==0,this.NR_OF_MULTIDELAYS);var r=new Float64Array(s.length);for(a=0;a<this.NR_OF_SINGLEDELAYS;a++)r=e.mixSampleBuffers(r,this.singleDelays[a].process(s),2%a==0,1);for(a=0;a<r.length;a++)r[a]*=this.mixVolume;for(s=e.mixSampleBuffers(r,t,0,1),a=0;a<s.length;a++)s[a]*=this.masterVolume;return s},module&&void 0!==module.exports&&(module.exports={DSP:e,DFT:a,FFT:h,RFFT:r,Sampler:n,Oscillator:l,ADSR:o,IIRFilter:u,IIRFilter2:f,WindowFunction:p,sinh:c,Biquad:y,GraphicalEq:d,MultiDelay:m,SingleDelay:b,Reverb:v});
},{}]},{},[1])